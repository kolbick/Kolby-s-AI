/*
  Kolby's AI refreshed UI
  - Purple + gold palette
  - Responsive chat cockpit with sidebar and hero sections
  - Shared button + form primitives for other pages
*/

:root {
  --purple-900: #2b0b5a;
  --purple-700: #5b21b6;
  --purple-500: #7c3aed;
  --purple-100: #f5edff;
  --gold-500: #f59e0b;
  --gold-200: #fef3c7;
  --sand-50: #f8f4ed;
  --sand-100: #f3ede3;
  --sand-200: #e6ded1;
  --ink: #1f172a;
  --ink-soft: #5a4c6f;
  --bg: #f7f3fd;
  --border: #e7ddf7;
  --shadow: 0 10px 40px rgba(43, 11, 90, 0.08);
  --radius-lg: 18px;
  --radius-md: 12px;
  --radius-sm: 8px;
  --space-1: 6px;
  --space-2: 10px;
  --space-3: 14px;
  --space-4: 18px;
  --space-5: 22px;
  --space-6: 28px;
  --space-7: 34px;
  --font-sans: "Inter", "SF Pro Text", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
}

*, *::before, *::after { box-sizing: border-box; }
html, body { margin: 0; padding: 0; height: 100%; }
body {
  font-family: var(--font-sans);
  background: radial-gradient(circle at 10% 20%, #f2e9ff 0, transparent 25%),
    radial-gradient(circle at 80% 0%, #fef6db 0, transparent 22%),
    var(--bg);
  color: var(--ink);
  line-height: 1.6;
}
body.sidebar-open { overflow: hidden; }
a { color: inherit; text-decoration: none; }
img { max-width: 100%; display: block; }

.app { display: grid; grid-template-columns: 280px minmax(0, 1fr); min-height: 100vh; }

/* Sidebar */
.sidebar {
  background: linear-gradient(180deg, #fbf7ff 0%, #f6f1ff 100%);
  border-right: 1px solid var(--border);
  padding: var(--space-6) var(--space-4);
  display: flex;
  flex-direction: column;
  gap: var(--space-5);
  position: relative;
  z-index: 9;
}
.sidebar__brand { display: flex; gap: var(--space-3); align-items: center; }
.brand-logo { width: 48px; height: 48px; border-radius: 14px; box-shadow: var(--shadow); background: white; }
.brand-copy { display: flex; flex-direction: column; gap: 2px; }
.brand-title { font-size: 20px; font-weight: 800; letter-spacing: -0.01em; }
.brand-sub { color: var(--ink-soft); font-size: 13px; }

.nav-group { display: flex; flex-direction: column; gap: var(--space-2); }
.nav-link {
  display: inline-flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-3);
  border-radius: var(--radius-md);
  border: 1px solid transparent;
  background: transparent;
  cursor: pointer;
  color: var(--ink-soft);
  font-weight: 600;
  transition: all 0.18s ease;
}
.nav-link .nav-icon { font-size: 18px; color: var(--purple-700); }
.nav-link:hover { background: white; border-color: var(--border); color: var(--ink); box-shadow: var(--shadow); }
.nav-link.active { background: var(--purple-100); color: var(--purple-900); border-color: var(--border); }
.nav-link .pill { margin-left: 6px; }

.sidebar__section { background: rgba(255, 255, 255, 0.7); border: 1px solid var(--border); border-radius: var(--radius-md); padding: var(--space-3); box-shadow: var(--shadow); }
.sidebar__section-title { text-transform: uppercase; letter-spacing: 0.08em; font-size: 12px; color: var(--ink-soft); margin-bottom: var(--space-2); }
.model-list { list-style: none; padding: 0; margin: 0; display: flex; flex-direction: column; gap: var(--space-2); }
.model-list-item {
  padding: 12px 14px;
  border-radius: var(--radius-sm);
  border: 1px solid var(--border);
  background: white;
  cursor: pointer;
  transition: all 0.15s ease;
  font-weight: 600;
  color: var(--ink);
}
.model-list-item:hover { transform: translateY(-2px); box-shadow: var(--shadow); }
.model-list-item.active { background: var(--purple-100); border-color: var(--purple-500); color: var(--purple-900); box-shadow: 0 10px 30px rgba(124, 58, 237, 0.12); }
.sidebar__status { display: flex; flex-direction: column; gap: var(--space-2); }

.sidebar-overlay { display: none; position: fixed; inset: 0; background: rgba(31, 23, 42, 0.35); z-index: 8; opacity: 0; transition: opacity 0.2s ease; }

/* Main */
.main { padding: var(--space-6) var(--space-6) var(--space-6) var(--space-6); display: flex; flex-direction: column; gap: var(--space-5); }
.topbar { display: flex; justify-content: space-between; gap: var(--space-4); align-items: center; flex-wrap: wrap; }
.topbar__left { display: flex; gap: var(--space-3); align-items: center; }
.topbar-title { margin: 0; font-size: 28px; letter-spacing: -0.02em; }
.topbar__right { display: flex; gap: var(--space-3); align-items: center; flex-wrap: wrap; justify-content: flex-end; }
.eyebrow { text-transform: uppercase; letter-spacing: 0.1em; color: var(--ink-soft); font-size: 12px; margin: 0 0 4px; }
.section-title { margin: 0; font-size: 22px; letter-spacing: -0.02em; }

.hero { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: var(--space-5); background: white; border-radius: var(--radius-lg); padding: var(--space-6); border: 1px solid var(--border); box-shadow: var(--shadow); }
.hero h2 { margin: 0 0 8px; font-size: 26px; letter-spacing: -0.02em; }
.hero .muted { max-width: 620px; }
.hero__tags { display: flex; gap: var(--space-2); flex-wrap: wrap; margin-top: var(--space-3); }
.hero__card { background: linear-gradient(135deg, rgba(124, 58, 237, 0.12), rgba(245, 158, 11, 0.12)); border-radius: var(--radius-md); padding: var(--space-4); border: 1px solid var(--border); box-shadow: var(--shadow); }
.hero__header { display: flex; justify-content: space-between; align-items: center; gap: var(--space-2); margin-bottom: var(--space-2); }
.hero__model { margin: 4px 0 0; font-weight: 800; font-size: 18px; }

.chat-area { display: flex; flex-direction: column; gap: var(--space-4); }
.chat-card { background: white; border-radius: var(--radius-lg); border: 1px solid var(--border); box-shadow: var(--shadow); padding: var(--space-5); display: flex; flex-direction: column; gap: var(--space-4); min-height: 420px; }
.chat-card__header { display: flex; justify-content: space-between; gap: var(--space-3); flex-wrap: wrap; }
.chat-actions { display: flex; gap: var(--space-2); align-items: center; }
.chat-thread { background: var(--sand-50); border: 1px dashed var(--border); border-radius: var(--radius-md); padding: var(--space-4); min-height: 220px; display: flex; flex-direction: column; gap: var(--space-3); overflow-y: auto; max-height: 55vh; }
.chat-empty { text-align: center; padding: var(--space-4); border-radius: var(--radius-md); border: 1px solid var(--border); background: white; color: var(--ink-soft); display: flex; flex-direction: column; gap: var(--space-2); }
.empty-icon { font-size: 28px; }
.empty-title { font-size: 18px; font-weight: 700; margin: 0; color: var(--ink); }

.message { padding: var(--space-3); border-radius: var(--radius-md); background: white; border: 1px solid var(--border); box-shadow: var(--shadow); max-width: 880px; }
.message__meta { display: flex; align-items: center; gap: 8px; margin-bottom: 6px; font-size: 13px; color: var(--ink-soft); }
.message__meta .role-pill { padding: 2px 8px; border-radius: 999px; font-weight: 700; background: var(--sand-100); color: var(--ink); border: 1px solid var(--border); }
.message--user { margin-left: auto; background: linear-gradient(135deg, #ede9fe, #fef6db); border-color: rgba(124, 58, 237, 0.3); }
.message--assistant { margin-right: auto; }
.message--pending { opacity: 0.8; }

.chat-input { display: flex; flex-direction: column; gap: var(--space-2); }
.chat-input__field { width: 100%; border-radius: var(--radius-md); border: 1px solid var(--border); padding: var(--space-3); font: inherit; resize: none; background: var(--sand-50); min-height: 72px; }
.chat-input__field:focus { outline: 2px solid var(--purple-500); box-shadow: 0 0 0 4px rgba(124, 58, 237, 0.15); }
.chat-input__controls { display: flex; justify-content: space-between; gap: var(--space-3); align-items: center; flex-wrap: wrap; }
.keyboard-tip { font-size: 13px; color: var(--ink-soft); }

.quick-prompts { display: flex; gap: var(--space-2); flex-wrap: wrap; }
prompt-chip,
.prompt-chip { border: 1px solid var(--border); background: white; padding: 10px 12px; border-radius: 999px; cursor: pointer; font-weight: 600; color: var(--ink); transition: all 0.15s ease; }
.prompt-chip:hover { background: var(--purple-100); color: var(--purple-900); box-shadow: var(--shadow); }

.badge { display: inline-flex; align-items: center; gap: 6px; padding: 7px 10px; border-radius: 999px; font-size: 13px; font-weight: 700; border: 1px solid transparent; }
.badge--success { background: #ecfdf3; color: #0f5132; border-color: #b7f0cd; }
.badge--info { background: #eef2ff; color: #3730a3; border-color: #c7d2fe; }
.badge--outline { border-color: var(--border); color: var(--ink); background: white; }
.pill { padding: 6px 10px; border-radius: 999px; background: var(--sand-100); border: 1px solid var(--border); font-weight: 700; color: var(--ink); font-size: 13px; }

.btn, .btn-outline, .btn-primary, .btn-ghost, .btn-icon {
  font: inherit;
  border-radius: 999px;
  padding: 10px 16px;
  cursor: pointer;
  border: 1px solid transparent;
  transition: all 0.15s ease;
  text-decoration: none;
  display: inline-flex;
  gap: 8px;
  align-items: center;
  justify-content: center;
  white-space: nowrap;
}
.btn-primary { background: linear-gradient(135deg, var(--purple-500), var(--purple-700)); color: white; box-shadow: var(--shadow); }
.btn-primary:hover { filter: brightness(1.03); }
.btn-outline, .btn { background: white; border-color: var(--border); color: var(--ink); }
.btn-outline:hover, .btn:hover { background: var(--purple-100); color: var(--purple-900); }
.btn-ghost { background: transparent; color: var(--ink); border: 1px dashed var(--border); }
.btn-ghost:hover { background: white; }
.btn-icon { width: 42px; height: 42px; border-radius: 12px; background: white; }
.link-inline { color: var(--purple-700); font-weight: 700; text-decoration: underline; text-decoration-thickness: 2px; }

.muted { color: var(--ink-soft); margin: 0; }
.sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); border: 0; }

/* Page containers for existing static pages */
.page-container { max-width: 960px; margin: 40px auto; padding: 0 16px 40px; }
.json-section { background: #ffffff; border: 1px solid var(--border); border-radius: var(--radius-md); padding: 14px 16px; margin-bottom: 14px; box-shadow: var(--shadow); }
.json-section h2 { margin: 0 0 8px; font-size: 18px; }
pre { background: #f9f4e7; padding: 12px; border-radius: 10px; overflow: auto; }
.actions { display: flex; gap: 10px; flex-wrap: wrap; align-items: center; margin-top: 14px; }

/* Story page */
.story-hero { background: white; border: 1px solid var(--border); border-radius: var(--radius-lg); padding: var(--space-6); box-shadow: var(--shadow); display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: var(--space-4); align-items: center; }
.story-hero img { width: 72px; height: 72px; border-radius: 18px; box-shadow: var(--shadow); }
.story-hero h1 { margin: 0 0 8px; font-size: 30px; letter-spacing: -0.02em; }
.story-hero p { margin: 0; color: var(--ink-soft); }
.story-section { background: white; border: 1px solid var(--border); border-radius: var(--radius-lg); padding: var(--space-5); box-shadow: var(--shadow); margin-top: var(--space-4); }
.story-section h2 { margin-top: 0; letter-spacing: -0.01em; }
.story-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: var(--space-3); }

/* Responsive */
@media (max-width: 960px) {
  .app { grid-template-columns: 1fr; }
  .sidebar { position: fixed; inset: 0 auto 0 0; width: 260px; max-width: 82vw; transform: translateX(-105%); transition: transform 0.25s ease; }
  body.sidebar-open .sidebar { transform: translateX(0); }
  .sidebar-overlay { display: block; }
  body.sidebar-open .sidebar-overlay { opacity: 1; }
  .main { padding: var(--space-5) var(--space-4) var(--space-5); }
  .chat-thread { max-height: none; }
}

@media (max-width: 600px) {
  .topbar__right { justify-content: flex-start; }
  .chat-card { padding: var(--space-4); }
  .chat-card__header { flex-direction: column; align-items: flex-start; }
  .chat-input__controls { flex-direction: column; align-items: flex-start; }
  .chat-actions { width: 100%; justify-content: flex-start; }
  .btn, .btn-outline, .btn-primary, .btn-ghost, .btn-icon { width: auto; }
}

@media (max-width: 420px) {
  .main { padding: var(--space-4) var(--space-3); }
  .hero, .chat-card { padding: var(--space-4); }
  .chat-thread { padding: var(--space-3); }
}
