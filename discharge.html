<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Discharge Summary</title>
  <link rel="stylesheet" href="assets/style.css?v=kolby-v1" />
  <style>
    .page-container {
      max-width: 900px;
      margin: 40px auto;
      padding: 0 15px;
    }
    .summary-section {
      padding: 16px;
      margin-bottom: 16px;
      background: #fffdf8;
      border-radius: 8px;
      border: 1px solid #d8cbb2;
    }
    .summary-section h2 {
      margin-top: 0;
      font-size: 18px;
    }
  </style>
</head>

<body>
  <div class="page-container">
    <h1>Discharge / Transition Summary</h1>
    <p>This summary is built from the information extracted from clinical notes and aftercare recommendations.</p>

    <div id="summaryBody"></div>

    <a href="note.html" class="btn btn-primary">Back to Note Entry</a>
    <a href="plan.html" class="btn btn-ghost">View Treatment Plan</a>
    <button id="resetBtn" class="btn btn-ghost">Reset Records</button>
  </div>

<script>
const patientRecord = JSON.parse(localStorage.getItem("patientRecord") || "{}");
const dischargeRecord = JSON.parse(localStorage.getItem("dischargeRecord") || "{}");

function renderSummary() {
  const container = document.getElementById("summaryBody");

  const progress = patientRecord.progress || "Not documented yet.";
  const aftercare = dischargeRecord.aftercare || "Aftercare recommendations not yet documented.";

  const html = `
    <div class="summary-section">
      <h2>Course of Treatment</h2>
      <p>${progress}</p>
    </div>

    <div class="summary-section">
      <h2>Aftercare Plan</h2>
      <p>${aftercare}</p>
    </div>

    <div class="summary-section">
      <h2>Prognosis</h2>
      <p>The client will have a positive prognosis if they fully follow Aftercare Recommendations.</p>
    </div>
  `;

  container.innerHTML = html;
}

renderSummary();

document.getElementById("resetBtn").onclick = () => {
  localStorage.removeItem("patientRecord");
  localStorage.removeItem("dischargeRecord");
  location.reload();
};
</script>
</body>
</html>
